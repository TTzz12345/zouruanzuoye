<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æƒ…ç»ªå……ç”µç«™</title>
    <meta name="description" content="ä¸ºZä¸–ä»£æä¾›æƒ…ç»ªæ²»æ„ˆã€å¿ƒç†èˆ’ç¼“å’Œåˆ›æ„è¡¨è¾¾çš„äº’åŠ¨å¹³å°">
    <meta name="keywords" content="æƒ…ç»ªå……ç”µç«™,æ²»æ„ˆ,å¿ƒç†,æ¶‚é¸¦,è§£å‹,æƒ…ç»ªç®¡ç†">
    <meta name="author" content="Zä¸–ä»£æƒ…ç»ªå……ç”µç«™å›¢é˜Ÿ">
    <!-- å¼•å…¥å­—ä½“ -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=ZCOOL+XiaoWei&display=swap');
    </style>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/animation.css">
    <link rel="stylesheet" href="./css/icons.css">
    <!-- å†…è”JavaScript - åŸºæœ¬é¡µé¢åŠŸèƒ½ -->
    <script type="text/javascript">
        // ç«‹å³æ‰§è¡Œçš„åˆå§‹åŒ–ä»£ç 
        (function() {
            // æ·»åŠ ç¼ºå¤±çš„bindAllElementså‡½æ•°
            window.bindAllElements = function() {
                
                // ç»‘å®šæ¸…ç©ºæŒ‰é’®
                const clearButtons = document.querySelectorAll('#clear-button, #clear-canvas, .clear-btn, .btn-clear');
                clearButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        if (typeof window.clearCanvas === 'function') {
                            window.clearCanvas();
                        }
                    });
                });
                
                // ç»‘å®šé¢œè‰²é€‰æ‹©å™¨
                const colorOptions = document.querySelectorAll('.color, .color-option');
                colorOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        const color = this.getAttribute('data-color') || this.style.backgroundColor;
                        if (color && typeof window.selectColor === 'function') {
                            window.selectColor(color, this);
                        }
                    });
                });
                
                // ç»‘å®šå·¥å…·æŒ‰é’®
                const toolButtons = document.querySelectorAll('.tool-btn, .tool-button');
                toolButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const tool = this.getAttribute('data-tool') || this.dataset.tool;
                        if (tool && typeof window.selectTool === 'function') {
                            window.selectTool(tool, this);
                        }
                    });
                });
            };
            
            // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œåˆå§‹åŒ–
            function initOnLoad() {
                // å…ˆç»‘å®šæ‰€æœ‰å…ƒç´ 
                if (typeof window.bindAllElements === 'function') {
                    window.bindAllElements();
                }
                
                // ç„¶ååˆå§‹åŒ–ç”»å¸ƒ
                setTimeout(() => {
                    if (typeof window.initDoodleCanvas === 'function') {
                        window.initDoodleCanvas();
                    }
                }, 300);
                
                // è®¾ç½®é»˜è®¤é€‰ä¸­çŠ¶æ€
                setTimeout(() => {
                    const defaultColor = document.querySelector('.color[data-color="#000000"]');
                    if (defaultColor && defaultColor instanceof HTMLElement) {
                        defaultColor.classList.add('active');
                    }
                    
                    const defaultTool = document.querySelector('.tool-btn[data-tool="brush"]');
                    if (defaultTool && defaultTool instanceof HTMLElement) {
                        defaultTool.classList.add('active');
                    }
                }, 500);
            }
            
            // ç›‘å¬é¡µé¢åŠ è½½çŠ¶æ€
            if (document.readyState === 'complete' || document.readyState === 'interactive') {
                setTimeout(initOnLoad, 300);
            } else {
                window.addEventListener('load', initOnLoad);
                document.addEventListener('DOMContentLoaded', function() {
                    setTimeout(initOnLoad, 300);
                });
            }
            

        })();
    </script>
    <!-- å¼•å…¥JavaScriptæ–‡ä»¶ -->
    <script src="js/utils.js" type="module"></script>
    <!-- æ¶‚é¸¦æ¿åŠŸèƒ½å·²åœ¨index.htmlä¸­ç›´æ¥å®ç° -->
    <script>
    // ç¡®ä¿bindAllElementså‡½æ•°å­˜åœ¨ä»¥é¿å…é”™è¯¯
    if (typeof window.bindAllElements !== 'function') {
        window.bindAllElements = function() {
            // ç»‘å®šæ‰€æœ‰å…ƒç´ äº‹ä»¶
        };
    }
    </script>
    <script>
    
    // åˆå§‹åŒ–æ¶‚é¸¦åŠŸèƒ½
    // ä¿å­˜åŸå§‹çš„initDoodleå‡½æ•°å¼•ç”¨ï¼ˆæ¥è‡ªjs/index.jsï¼‰
    const originalInitDoodle = window.initDoodle;
    
    window.initDoodle = function() {
        // ç¡®ä¿æ¶‚é¸¦é¡µé¢å¯è§
        const doodlePage = document.getElementById('doodle');
        if (doodlePage) {
            // ç¡®ä¿é¡µé¢å¯è§
            doodlePage.style.display = 'block';
            doodlePage.classList.remove('hidden');
        } else {
            console.error('æœªæ‰¾åˆ°doodleé¡µé¢å…ƒç´ ');
            return false;
        }
        
        // å»¶è¿Ÿåˆå§‹åŒ–ç”»å¸ƒï¼Œç¡®ä¿DOMå®Œå…¨æ¸²æŸ“
        setTimeout(() => {
            if (typeof window.initDoodleCanvas === 'function') {
                const result = window.initDoodleCanvas();
                
                return result;
            } else {
                console.error('initDoodleCanvaså‡½æ•°æœªæ‰¾åˆ°');
                return false;
            }
        }, 50);
        
        return true;
    };
    
    // æœ€ç®€å•ç›´æ¥çš„å¯¼èˆªå‡½æ•°
    function navigateTo(pageId) {
        console.log('å¯¼èˆªåˆ°é¡µé¢:', pageId);
        
        // åˆ‡æ¢èƒŒæ™¯å›¾ç‰‡
        function setBackgroundImage(pageId) {
            const body = document.body;
            const imagePath = './å›¾ç‰‡/';
            
            switch (pageId) {
                case 'home':
                    // é¦–é¡µèƒŒæ™¯ä¸ºç¬¬ä¸€å¼ å›¾ç‰‡
                    body.style.backgroundImage = `url(${imagePath}å¾®ä¿¡å›¾ç‰‡_20251208225450_164_7.png)`;
                    break;
                case 'relaxwall':
                    // è§†è§‰è§£å‹å¢™èƒŒæ™¯ä¸ºç¬¬ä¸‰å¼ å›¾ç‰‡
                    body.style.backgroundImage = `url(${imagePath}å¾®ä¿¡å›¾ç‰‡_20251208225455_166_7.png)`;
                    break;
                case 'doodle':
                    // æ¶‚é¸¦æ²»æ„ˆæ¿èƒŒæ™¯ä¸ºç¬¬äºŒå¼ å›¾ç‰‡
                    body.style.backgroundImage = `url(${imagePath}å¾®ä¿¡å›¾ç‰‡_20251208225454_165_7.png)`;
                    break;
                case 'relax-games':
                case 'emotion-charging':
                    // å…¶ä»–ä¸¤ä¸ªæ¿å—èƒŒæ™¯ä¸ºç¬¬å››å¼ å›¾ç‰‡
                    body.style.backgroundImage = `url(${imagePath}å¾®ä¿¡å›¾ç‰‡_20251208225456_167_7.png)`;
                    break;
                default:
                    // é»˜è®¤ä½¿ç”¨é¦–é¡µèƒŒæ™¯
                    body.style.backgroundImage = `url(${imagePath}å¾®ä¿¡å›¾ç‰‡_20251208225450_164_7.png)`;
            }
        }
        
        // è®¾ç½®èƒŒæ™¯å›¾ç‰‡
        setBackgroundImage(pageId);
        
        // è·å–æ‰€æœ‰é¡µé¢
        const pages = document.querySelectorAll('.page');
        
        // éšè—æ‰€æœ‰é¡µé¢
        pages.forEach(page => {
            page.classList.add('hidden');
            page.classList.remove('active');
            // ç¡®ä¿æ‰€æœ‰é¡µé¢éƒ½éšè—
            page.style.display = 'none';
        });
        
        // æ˜¾ç¤ºç›®æ ‡é¡µé¢
        const targetPage = document.getElementById(pageId);
        if (targetPage) {
            console.log('æ‰¾åˆ°ç›®æ ‡é¡µé¢:', pageId);
            
            // å…ˆç§»é™¤éšè—ç±»ï¼Œå†æ·»åŠ æ¿€æ´»ç±»ï¼Œæœ€åç¡®ä¿æ˜¾ç¤º
            targetPage.classList.remove('hidden');
            targetPage.classList.add('active');
            targetPage.style.display = 'block';
            
            // ç¡®ä¿é¡µé¢æ˜¯å¯è§çš„
            targetPage.scrollIntoView({ behavior: 'smooth' });
            
            // è°ƒç”¨å¯¹åº”é¡µé¢çš„åˆå§‹åŒ–å‡½æ•°
            if (pageId === 'doodle') {
                // è°ƒç”¨æ¶‚é¸¦åˆå§‹åŒ–å‡½æ•°
                if (typeof window.initDoodleCanvas === 'function') {
                    window.initDoodleCanvas();
                }
            }
        } else {
            console.error('æœªæ‰¾åˆ°é¡µé¢:', pageId);
        }
    }
    
    // é¡µé¢åŠ è½½å®Œæˆåç«‹å³æ‰§è¡Œ
    document.addEventListener('DOMContentLoaded', function() {
        // ç¡®ä¿é¦–é¡µæ˜¯å¯è§çš„
        navigateTo('home');
        
        // ç»‘å®šæ‰€æœ‰å…¥å£å¡ç‰‡ç‚¹å‡»äº‹ä»¶
        const cards = document.querySelectorAll('.entrance-card');
        cards.forEach(card => {
            card.onclick = function() {
                const target = this.getAttribute('data-target');
                if (target) {
                    navigateTo(target);
                }
            };
            // ç¡®ä¿å¡ç‰‡æ˜¯å¯ç‚¹å‡»çš„
            card.style.cursor = 'pointer';
            card.style.display = 'block';
        });
        
        // ç»‘å®šè¿”å›é¦–é¡µæŒ‰é’®äº‹ä»¶
        const backHomeBtn = document.querySelector('.back-home-btn');
        if (backHomeBtn) {
            backHomeBtn.onclick = function() {
                navigateTo('home');
            };
            backHomeBtn.style.cursor = 'pointer';
        }
    });
    

    </script>
    <!-- è„šæœ¬å·²åœ¨é¡µé¢é¡¶éƒ¨å¯¼å…¥ -->
</head>
<body>
        <!-- èƒŒæ™¯éŸ³ä¹æ§åˆ¶ -->
        <div class="music-control">
            <button class="music-btn" id="music-btn" title="æ’­æ”¾/æš‚åœéŸ³ä¹">
                <span class="music-icon">ğŸµ</span>
            </button>
            <div class="music-progress">
                <input type="range" id="music-progress" class="progress-bar" min="0" max="100" value="0" step="0.1">
            </div>
            <select class="music-select" id="music-select" title="é€‰æ‹©éŸ³ä¹">
                <option value="">é€‰æ‹©éŸ³ä¹</option>
                <option value="audio/Janevo_-_Calm_Reflections_(Lofi_Chill_Hop).mp3">è½»æ¾éŸ³ä¹</option>
                <option value="audio/Paradeigma_-_Souldrop_(feat._Yogi_Rulez).mp3">çµé­‚ä¹‹æ»´</option>
                <option value="audio/RIZA_music_-_Centenary_Mechanism.mp3">ç™¾å¹´æœºåˆ¶</option>
                <option value="audio/Ã˜raeth_-_still_falling.mp3">ä¾ç„¶å è½</option>
            </select>
        </div>

        <!-- èƒŒæ™¯åŠ¨æ€å…ƒç´  -->
        <div class="background-container">
        <div class="cloud cloud-1"></div>
        <div class="cloud cloud-2"></div>
        <div class="cloud cloud-3"></div>
        <div class="bubble bubble-1"></div>
        <div class="bubble bubble-2"></div>
        <div class="bubble bubble-3"></div>
    </div>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="main-content">
        <!-- é¦–é¡µ -->
        <section id="home" class="page">
            <h1 class="site-title">æƒ…ç»ªå……ç”µç«™</h1>
            <p class="site-subtitle">ç”¨è§†è§‰æ²»æ„ˆä½ çš„å¿ƒçµ</p>
            
            <div class="function-entrances">
                <div class="entrance-card" data-target="relaxwall">
                    <div class="entrance-icon relaxwall-icon"></div>
                    <h2 class="entrance-title">è§†è§‰è§£å‹å¢™</h2>
                </div>
                
                <div class="entrance-card" data-target="doodle">
                    <div class="entrance-icon doodle-icon"></div>
                    <h2 class="entrance-title">æ¶‚é¸¦æ²»æ„ˆæ¿</h2>
                </div>
                
                <div class="entrance-card" data-target="emotion-charging">
                    <div class="entrance-icon charging-icon"></div>
                    <h2 class="entrance-title">æ¸©æš–èƒ½é‡ç«™</h2>
                </div>
                <div class="entrance-card" data-target="relax-games">
                    <div class="entrance-icon games-icon"></div>
                    <h2 class="entrance-title">æ”¾æ¾å°æ¸¸æˆ</h2>
                </div>

            </div>
        </section>



        <!-- è§†è§‰è§£å‹å¢™ -->
        <section id="relaxwall" class="page hidden">
            <div class="relaxwall-container">
                <div class="relaxwall-sidebar">
                     <h3>è§£å‹åœºæ™¯</h3>
                     <button class="scene-btn active" data-scene="wave">æ°´æ³¢çº¹</button>
                     <button class="scene-btn" data-scene="particles">ç²’å­æµ</button>
                     <button class="scene-btn" data-scene="gradient">æ¸å˜å—</button>
                 </div>
                
                <div class="relaxwall-main">
                    <!-- æ°´æ³¢çº¹ç”»å¸ƒ -->
                    <canvas id="relax-canvas" width="800" height="500" style="background:#fff; border:3px solid #000; cursor:pointer;"></canvas>
                    <script>
                        // è§†è§‰è§£å‹å¢™åœºæ™¯ç®¡ç†ç³»ç»Ÿ
                        (function() {
                            const canvas = document.getElementById('relax-canvas');
                            const ctx = canvas.getContext('2d');
                            let currentScene = 'wave';
                            let animationId = null;
                            
                            // åœºæ™¯æ•°æ®
                            const scenes = {
                                wave: {
                                    data: [],
                                    init: function() {
                                        this.data = [];
                                        // æ·»åŠ åˆå§‹æ³¢çº¹
                                        this.data.push({x: 400, y: 250, radius: 0, opacity: 1});
                                    },
                                    update: function() {
                                        // æ›´æ–°æ‰€æœ‰æ³¢çº¹
                                        for (let i = this.data.length - 1; i >= 0; i--) {
                                            const wave = this.data[i];
                                            wave.radius += 12;
                                            wave.opacity -= 0.02;
                                            
                                            if (wave.opacity <= 0) {
                                                this.data.splice(i, 1);
                                            }
                                        }
                                    },
                                    draw: function() {
                                        // æ¸…ç©ºç”»å¸ƒ
                                        ctx.fillStyle = '#ffffff';
                                        ctx.fillRect(0, 0, 800, 500);
                                        
                                        // ç»˜åˆ¶æ‰€æœ‰æ³¢çº¹
                                        for (let i = 0; i < this.data.length; i++) {
                                            const wave = this.data[i];
                                            
                                            // ç»˜åˆ¶å¤šå±‚è“è‰²æ³¢çº¹
                                            for (let j = 0; j < 4; j++) {
                                                const r = wave.radius - (j * 25);
                                                if (r > 0) {
                                                    ctx.beginPath();
                                                    ctx.arc(wave.x, wave.y, r, 0, Math.PI * 2);
                                                    ctx.strokeStyle = `rgba(0, 150, 255, ${wave.opacity * (1 - j * 0.15)})`;
                                                    ctx.lineWidth = 12 - j * 2;
                                                    ctx.stroke();
                                                }
                                            }
                                        }
                                    },
                                    onCanvasClick: function(x, y) {
                                        // æ·»åŠ å¤šä¸ªæ³¢çº¹
                                        for (let i = 0; i < 3; i++) {
                                            setTimeout(() => {
                                                this.data.push({
                                                    x: x + (Math.random() * 10 - 5),
                                                    y: y + (Math.random() * 10 - 5),
                                                    radius: 0,
                                                    opacity: 1
                                                });
                                            }, i * 80);
                                        }
                                    }
                                },
                                particles: {
                                    data: [],
                                    init: function() {
                                        this.data = [];
                                        // åˆå§‹åŒ–ç²’å­
                                        for (let i = 0; i < 100; i++) {
                                            this.data.push({
                                                x: Math.random() * 800,
                                                y: Math.random() * 500,
                                                vx: (Math.random() - 0.5) * 2,
                                                vy: (Math.random() - 0.5) * 2,
                                                size: Math.random() * 5 + 2,
                                                color: `rgba(${Math.random() * 100 + 50}, ${Math.random() * 100 + 100}, ${Math.random() * 200 + 55}, ${Math.random() * 0.5 + 0.5})`
                                            });
                                        }
                                    },
                                    update: function() {
                                        // æ›´æ–°æ‰€æœ‰ç²’å­
                                        for (let i = 0; i < this.data.length; i++) {
                                            const p = this.data[i];
                                            p.x += p.vx;
                                            p.y += p.vy;
                                            
                                            // è¾¹ç•Œæ£€æµ‹
                                            if (p.x < 0 || p.x > 800) p.vx = -p.vx;
                                            if (p.y < 0 || p.y > 500) p.vy = -p.vy;
                                        }
                                    },
                                    draw: function() {
                                        // æ¸…ç©ºç”»å¸ƒ
                                        ctx.fillStyle = '#ffffff';
                                        ctx.fillRect(0, 0, 800, 500);
                                        
                                        // ç»˜åˆ¶æ‰€æœ‰ç²’å­
                                        for (let i = 0; i < this.data.length; i++) {
                                            const p = this.data[i];
                                            ctx.fillStyle = p.color;
                                            ctx.beginPath();
                                            ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                                            ctx.fill();
                                        }
                                    },
                                    onCanvasClick: function(x, y) {
                                        // æ·»åŠ æ–°ç²’å­
                                        for (let i = 0; i < 20; i++) {
                                            this.data.push({
                                                x: x,
                                                y: y,
                                                vx: (Math.random() - 0.5) * 5,
                                                vy: (Math.random() - 0.5) * 5,
                                                size: Math.random() * 4 + 1,
                                                color: `rgba(${Math.random() * 100 + 50}, ${Math.random() * 100 + 100}, ${Math.random() * 200 + 55}, ${Math.random() * 0.5 + 0.5})`
                                            });
                                        }
                                    }
                                },
                                gradient: {
                                    data: [],
                                    init: function() {
                                        this.data = [];
                                        // åˆå§‹åŒ–æ¸å˜å—
                                        for (let i = 0; i < 10; i++) {
                                            const size = Math.random() * 100 + 50;
                                            this.data.push({
                                                x: Math.random() * (800 - size),
                                                y: Math.random() * (500 - size),
                                                width: size,
                                                height: size,
                                                color: `rgba(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255}, 0.8)`,
                                                rotation: Math.random() * Math.PI * 2
                                            });
                                        }
                                    },
                                    update: function() {
                                        // æ›´æ–°æ‰€æœ‰æ¸å˜å—
                                        for (let i = 0; i < this.data.length; i++) {
                                            this.data[i].rotation += 0.01;
                                        }
                                    },
                                    draw: function() {
                                        // æ¸…ç©ºç”»å¸ƒ
                                        ctx.fillStyle = '#ffffff';
                                        ctx.fillRect(0, 0, 800, 500);
                                        
                                        // ç»˜åˆ¶æ‰€æœ‰æ¸å˜å—
                                        for (let i = 0; i < this.data.length; i++) {
                                            const block = this.data[i];
                                            
                                            ctx.save();
                                            ctx.translate(block.x + block.width / 2, block.y + block.height / 2);
                                            ctx.rotate(block.rotation);
                                            
                                            // åˆ›å»ºå¾„å‘æ¸å˜
                                            const gradient = ctx.createRadialGradient(
                                                -block.width / 2, -block.height / 2,
                                                0,
                                                block.width / 2, block.height / 2,
                                                Math.sqrt(block.width * block.width + block.height * block.height) / 2
                                            );
                                            gradient.addColorStop(0, block.color);
                                            gradient.addColorStop(1, 'rgba(255, 255, 255, 0.2)');
                                            
                                            ctx.fillStyle = gradient;
                                            ctx.fillRect(-block.width / 2, -block.height / 2, block.width, block.height);
                                            
                                            ctx.restore();
                                        }
                                    },
                                    onCanvasClick: function(x, y) {
                                        // æ·»åŠ æ–°çš„æ¸å˜å—
                                        const size = Math.random() * 100 + 50;
                                        this.data.push({
                                            x: x - size / 2,
                                            y: y - size / 2,
                                            width: size,
                                            height: size,
                                            color: `rgba(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255}, 0.8)`,
                                            rotation: Math.random() * Math.PI * 2
                                        });
                                    }
                                }
                            };
                            
                            // åŠ¨ç”»å¾ªç¯
                            function animate() {
                                const scene = scenes[currentScene];
                                if (scene) {
                                    scene.update();
                                    scene.draw();
                                }
                                animationId = requestAnimationFrame(animate);
                            }
                            
                            // åˆ‡æ¢åœºæ™¯
                            function switchScene(sceneName) {
                                if (scenes[sceneName]) {
                                    currentScene = sceneName;
                                    scenes[sceneName].init();
                                    
                                    // æ›´æ–°æŒ‰é’®çŠ¶æ€
                                    document.querySelectorAll('.scene-btn').forEach(btn => {
                                        btn.classList.remove('active');
                                        if (btn.dataset.scene === sceneName) {
                                            btn.classList.add('active');
                                        }
                                    });
                                }
                            }
                            
                            // ç»‘å®šåœºæ™¯åˆ‡æ¢æŒ‰é’®äº‹ä»¶
                            document.querySelectorAll('.scene-btn').forEach(btn => {
                                btn.addEventListener('click', function() {
                                    const scene = this.dataset.scene;
                                    switchScene(scene);
                                });
                            });
                            
                            // ç»‘å®šç”»å¸ƒç‚¹å‡»äº‹ä»¶
                            canvas.addEventListener('click', function(e) {
                                const rect = canvas.getBoundingClientRect();
                                const x = e.clientX - rect.left;
                                const y = e.clientY - rect.top;
                                
                                const scene = scenes[currentScene];
                                if (scene && scene.onCanvasClick) {
                                    scene.onCanvasClick(x, y);
                                }
                            });
                            
                            // åˆå§‹åŒ–
                            switchScene('wave');
                            animate();
                            
                            // å¯¼å‡ºå…¬å…±æ–¹æ³•ä¾›å¤–éƒ¨è°ƒç”¨
                            window.relaxWall = {
                                switchScene: switchScene
                            };
                        })();
                    </script>
                </div>
            </div>
        </section>

        <!-- æ¶‚é¸¦æ²»æ„ˆæ¿ -->
        <section id="doodle" class="page hidden">
            <div class="doodle-container">
                <div class="doodle-sidebar">
                    <h3>ç»˜ç”»å·¥å…·</h3>
                    <div class="tools">
                        <button class="tool-btn active" data-tool="brush" onclick="selectTool('brush', this); return false;" style="cursor: pointer; z-index: 9999; position: relative; pointer-events: auto;">
                            <span class="tool-icon brush-icon"></span>
                            <span>è½¯è¾¹ç”»ç¬”</span>
                        </button>
                        <button class="tool-btn" data-tool="eraser" onclick="selectTool('eraser', this); return false;" style="cursor: pointer; z-index: 9999; position: relative; pointer-events: auto;">
                            <span class="tool-icon eraser-icon"></span>
                            <span>æ©¡çš®æ“¦</span>
                        </button>
                    </div>
                    
                    <h3>é¢œè‰²é€‰æ‹©</h3>
                    <div class="color-palette">
                        <div class="color color-black active" data-color="#000000" onclick="selectColor('#000000', this); return false;" style="cursor: pointer; z-index: 9999; position: relative; pointer-events: auto;"></div>
                        <div class="color color-red" data-color="#FF0000" onclick="selectColor('#FF0000', this); return false;" style="cursor: pointer; z-index: 9999; position: relative; pointer-events: auto;"></div>
                        <div class="color color-tea" data-color="#E6D2AA" onclick="selectColor('#E6D2AA', this); return false;" style="cursor: pointer; z-index: 9999; position: relative; pointer-events: auto;"></div>
                        <div class="color color-blue" data-color="#A9C6D9" onclick="selectColor('#A9C6D9', this); return false;" style="cursor: pointer; z-index: 9999; position: relative; pointer-events: auto;"></div>
                        <div class="color color-pink" data-color="#F5CEDC" onclick="selectColor('#F5CEDC', this); return false;" style="cursor: pointer; z-index: 9999; position: relative; pointer-events: auto;"></div>
                        <div class="color color-green" data-color="#B6D7A8" onclick="selectColor('#B6D7A8', this); return false;" style="cursor: pointer; z-index: 9999; position: relative; pointer-events: auto;"></div>
                        <div class="color color-purple" data-color="#C9A0DC" onclick="selectColor('#C9A0DC', this); return false;" style="cursor: pointer; z-index: 9999; position: relative; pointer-events: auto;"></div>
                        <div class="color color-orange" data-color="#F9CB9C" onclick="selectColor('#F9CB9C', this); return false;" style="cursor: pointer; z-index: 9999; position: relative; pointer-events: auto;"></div>
                    </div>
                    
                    <div class="canvas-settings">
                        <button class="setting-btn" id="clear-canvas">ä¸€é”®æ¸…ç©º</button>
                    </div>
                </div>
                
                <div class="doodle-main">
                    <canvas id="doodle-canvas" width="800" height="400"></canvas>
                </div>
            </div>
            
            <div class="doodle-patterns">
                <h3>çµæ„Ÿå‚è€ƒ</h3>
                <div class="pattern-library">
                    <div class="pattern" data-pattern="cloud">â˜ï¸</div>
                    <div class="pattern" data-pattern="smile">ğŸ˜Š</div>
                    <div class="pattern" data-pattern="sun">â˜€ï¸</div>
                    <div class="pattern" data-pattern="heart">â¤ï¸</div>
                    <div class="pattern" data-pattern="star">â­</div>
                    <div class="pattern" data-pattern="moon">ğŸŒ™</div>
                </div>
            </div>
        </section>
        
        <!-- æ”¾æ¾å°æ¸¸æˆ -->
        <section id="relax-games" class="page hidden">
            <div class="games-container">
                <h2 class="games-title">æ”¾æ¾å°æ¸¸æˆ</h2>
                <div class="games-content">
                    <!-- æ¸¸æˆé€‰æ‹©åŒº -->
                    <div class="game-selection">
                        <a href="breathing-game.html" class="game-card">
                            <div class="game-icon breathing-icon"></div>
                            <h3 class="game-name">å‘¼å¸ç»ƒä¹ </h3>
                            <p class="game-description">è·Ÿéšå¼•å¯¼è¿›è¡Œæ·±å‘¼å¸ï¼Œæ”¾æ¾èº«å¿ƒ</p>
                        </a>
                        <a href="bubble-game.html" class="game-card">
                            <div class="game-icon bubble-icon"></div>
                            <h3 class="game-name">æ°”æ³¡ç‚¹å‡»</h3>
                            <p class="game-description">ç‚¹å‡»å±å¹•ä¸Šçš„æ°”æ³¡ï¼Œé‡Šæ”¾å‹åŠ›ï¼Œäº«å—ä¹è¶£</p>
                        </a>
                        <a href="meditation-game.html" class="game-card">
                            <div class="game-icon meditation-icon"></div>
                            <h3 class="game-name">å†¥æƒ³å¼•å¯¼</h3>
                            <p class="game-description">è·ŸéšéŸ³é¢‘å¼•å¯¼è¿›è¡Œå†¥æƒ³æ”¾æ¾</p>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- æ¸©æš–èƒ½é‡ç«™ -->
        <section id="emotion-charging" class="page hidden">
            <div class="charging-station-container">
                <h2 class="charging-station-title">æ¸©æš–èƒ½é‡ç«™</h2>
                <div class="charging-station-content">
                    <div class="charging-station-button-container">
                        <button class="charging-station-button" id="get-warmth-btn">è·å–æ¸©æš–</button>
                    </div>
                    <div class="charging-station-display">
                        <p class="charging-station-text"></p>
                        <div class="charging-station-illustration"></div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <nav class="top-nav">
        <div class="nav-container">
            <ul class="nav-list">
                <li class="nav-item"><a href="#home" class="nav-link" onclick="navigateTo('home')">é¦–é¡µ</a></li>
                <li class="nav-item"><a href="#relaxwall" class="nav-link" onclick="navigateTo('relaxwall')">è§†è§‰è§£å‹å¢™</a></li>
                <li class="nav-item"><a href="#doodle" class="nav-link" onclick="navigateTo('doodle')">æ¶‚é¸¦æ²»æ„ˆæ¿</a></li>
                <li class="nav-item"><a href="#emotion-charging" class="nav-link" onclick="navigateTo('emotion-charging')">æ¸©æš–èƒ½é‡ç«™</a></li>
                <li class="nav-item"><a href="#relax-games" class="nav-link" onclick="navigateTo('relax-games')">æ”¾æ¾å°æ¸¸æˆ</a></li>
            </ul>
        </div>
    </nav>

    <!-- åº•éƒ¨ä¿¡æ¯ -->
    <footer class="footer">
        <div class="footer-content">
            <p class="copyright">Â© æƒ…ç»ªå……ç”µç«™</p>
        </div>
    </footer>



    <script>
        // æ¸©æš–èƒ½é‡ç«™åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            // è·å–DOMå…ƒç´ 
            const chargingStation = document.getElementById('emotion-charging');
            const chargingContent = document.querySelector('.charging-station-content');
            const tipText = document.querySelector('.charging-station-text');
            const tipIllustration = document.querySelector('.charging-station-illustration');
            
            // éšæœºè·å–æƒ…ç»ªå°è´´å£«ã€æš–å¿ƒè¯æˆ–è‰ºæœ¯ç”»
            function getRandomWarmth() {
                const warmths = [
                    // æƒ…ç»ªå°è´´å£«
                    {
                        type: 'tip',
                        text: 'æ…Œçš„æ—¶å€™ï¼Œè¯•è¯•ç›¯ç€çª—å¤–çš„æ ‘çœ‹10ç§’ï¼Œè®©å‘¼å¸æ…¢ä¸‹æ¥ã€‚',
                        illustration: 'ğŸŒ³'
                    },
                    {
                        type: 'tip',
                        text: 'ä¸å¼€å¿ƒæ—¶ï¼Œå¯ä»¥è¯•ç€å†™ä¸‹ä¸‰ä»¶ä»Šå¤©è®©ä½ æ„Ÿæ¿€çš„å°äº‹ã€‚',
                        illustration: 'ğŸ“'
                    },
                    {
                        type: 'tip',
                        text: 'æ·±å‘¼å¸æ˜¯æœ€å¥½çš„è§£å‹æ–¹å¼ï¼šå¸æ°”4ç§’ï¼Œå±æ¯4ç§’ï¼Œå‘¼æ°”6ç§’ã€‚',
                        illustration: 'ğŸ’¨'
                    },
                    {
                        type: 'tip',
                        text: 'ç»™è‡ªå·±ä¸€ä¸ªæ¸©æš–çš„æ‹¥æŠ±ï¼Œèº«ä½“ä¼šé‡Šæ”¾å‡ºå®‰å¿ƒçš„ä¿¡å·ã€‚',
                        illustration: 'ğŸ¤—'
                    },
                    {
                        type: 'tip',
                        text: 'å–ä¸€æ¯æ¸©æ°´ï¼Œç…§é¡¾å¥½èº«ä½“ï¼Œå¿ƒæƒ…ä¹Ÿä¼šæ…¢æ…¢å¥½èµ·æ¥ã€‚',
                        illustration: 'ğŸ’§'
                    },
                    {
                        type: 'tip',
                        text: 'é—­ä¸Šçœ¼ç›ï¼Œæƒ³è±¡ä½ æœ€å–œæ¬¢çš„åœ°æ–¹ï¼Œè®©æ€ç»ªçŸ­æš‚é€ƒç¦»ã€‚',
                        illustration: 'ğŸŒ„'
                    },
                    // æš–å¿ƒè¯
                    {
                        type: 'warm',
                        text: 'ä½ å·²ç»åšå¾—å¾ˆå¥½äº†ï¼Œæ…¢æ…¢æ¥ï¼Œä¸€åˆ‡éƒ½ä¼šå¥½èµ·æ¥çš„ã€‚',
                        illustration: 'ğŸ’–'
                    },
                    {
                        type: 'warm',
                        text: 'ä»Šå¤©çš„ä½ ä¹Ÿå¾ˆå¯çˆ±ï¼Œè®°å¾—ç»™è‡ªå·±ä¸€ä¸ªå¾®ç¬‘ã€‚',
                        illustration: 'ğŸ˜Š'
                    },
                    {
                        type: 'warm',
                        text: 'ä¸è¦å®³æ€•ï¼Œä½ æ°¸è¿œä¸æ˜¯ä¸€ä¸ªäººåœ¨æˆ˜æ–—ã€‚',
                        illustration: 'ğŸ¤'
                    },
                    {
                        type: 'warm',
                        text: 'æ¯ä¸€ä¸ªåŠªåŠ›çš„æ—¥å­ï¼Œéƒ½åœ¨ä¸ºæ›´å¥½çš„è‡ªå·±é“ºè·¯ã€‚',
                        illustration: 'ğŸŒŸ'
                    },
                    {
                        type: 'warm',
                        text: 'ç”Ÿæ´»æœ‰æ—¶å€™ä¼šæœ‰ç‚¹è‹¦ï¼Œä½†ä½ å¯ä»¥è‡ªå·±åŠ ä¸€ç‚¹ç³–ã€‚',
                        illustration: 'ğŸ¬'
                    },
                    // ASCIIè‰ºæœ¯ç”»
                    {                        type: 'art',                        text: 'è¿™é‡Œæœ‰ä¸€æœµå°èŠ±ï¼Œé€ç»™å¯çˆ±çš„ä½ ',                        illustration: 'ğŸŒ¼'                    },                    {                        type: 'art',                        text: 'ç»™ä½ ä¸€ä¸ªæ¸©æš–çš„å°å¤ªé˜³',                        illustration: 'â˜€ï¸'                    },                    {
                        type: 'art',
                        text: 'æ¸©æš–å°çˆ±å¿ƒ',
                        illustration: '   ğŸ’–ğŸ’–ğŸ’–ğŸ’–  \nğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–\nğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–\nğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–\n ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–\n   ğŸ’–ğŸ’–ğŸ’–ğŸ’–\n     ğŸ’–ğŸ’–'
                    },
                    {
                        type: 'art',
                        text: 'ä¸€åªå¯çˆ±çš„å°çŒ«',
                        illustration: `\nğŸ±\n\n  /\\_/\\\n ( o.o )\n  > ^ <`
                    }
                ];
                
                return warmths[Math.floor(Math.random() * warmths.length)];
            }
            
            // æ˜¾ç¤ºæ¸©æš–å†…å®¹
            function showWarmth() {
                const warmth = getRandomWarmth();
                tipText.textContent = warmth.text;
                tipIllustration.textContent = warmth.illustration;
            }
            
            // åˆå§‹åŒ–æ¸©æš–èƒ½é‡ç«™
            function initEmotionCharging() {
                // è·å–æ¸©æš–æŒ‰é’®
                const getWarmthBtn = document.getElementById('get-warmth-btn');
                
                // åˆå§‹åŒ–æ˜¾ç¤ºç¬¬ä¸€æ¡æ¸©æš–å†…å®¹
                showWarmth();
                
                // æ·»åŠ æŒ‰é’®ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨
                getWarmthBtn.addEventListener('click', showWarmth);
            }
            
            // ç»‘å®šäº‹ä»¶
            // é¡µé¢åˆ‡æ¢åŠŸèƒ½ä¼šåœ¨ä¸»èœå•ä¸­å¤„ç†
            
            // åˆå§‹åŒ–
            initEmotionCharging();
        });
        document.addEventListener('DOMContentLoaded', function() {
            // æ¸©æš–èƒ½é‡ç«™åŠŸèƒ½
            const getWarmthBtn = document.getElementById('get-warmth-btn');
            const tipText = document.querySelector('.charging-station-text');
            const tipIllustration = document.querySelector('.charging-station-illustration');
            
            // éšæœºè·å–æ¸©æš–å†…å®¹
            function getRandomWarmth() {
                const warmths = [
                    // æƒ…ç»ªå°è´´å£«
                    {
                        type: 'tip',
                        text: 'æ…Œçš„æ—¶å€™ï¼Œè¯•è¯•ç›¯ç€çª—å¤–çš„æ ‘çœ‹10ç§’ï¼Œè®©å‘¼å¸æ…¢ä¸‹æ¥ã€‚',
                        illustration: 'ğŸŒ³'
                    },
                    {
                        type: 'tip',
                        text: 'ä¸å¼€å¿ƒæ—¶ï¼Œå¯ä»¥è¯•ç€å†™ä¸‹ä¸‰ä»¶ä»Šå¤©è®©ä½ æ„Ÿæ¿€çš„å°äº‹ã€‚',
                        illustration: 'ğŸ“'
                    },
                    {
                        type: 'tip',
                        text: 'æ·±å‘¼å¸æ˜¯æœ€å¥½çš„è§£å‹æ–¹å¼ï¼šå¸æ°”4ç§’ï¼Œå±æ¯4ç§’ï¼Œå‘¼æ°”6ç§’ã€‚',
                        illustration: 'ğŸ’¨'
                    },
                    {
                        type: 'tip',
                        text: 'ç»™è‡ªå·±ä¸€ä¸ªæ¸©æš–çš„æ‹¥æŠ±ï¼Œèº«ä½“ä¼šé‡Šæ”¾å‡ºå®‰å¿ƒçš„ä¿¡å·ã€‚',
                        illustration: 'ğŸ¤—'
                    },
                    {
                        type: 'tip',
                        text: 'å–ä¸€æ¯æ¸©æ°´ï¼Œç…§é¡¾å¥½èº«ä½“ï¼Œå¿ƒæƒ…ä¹Ÿä¼šæ…¢æ…¢å¥½èµ·æ¥ã€‚',
                        illustration: 'ğŸ’§'
                    },
                    {
                        type: 'tip',
                        text: 'é—­ä¸Šçœ¼ç›ï¼Œæƒ³è±¡ä½ æœ€å–œæ¬¢çš„åœ°æ–¹ï¼Œè®©æ€ç»ªçŸ­æš‚é€ƒç¦»ã€‚',
                        illustration: 'ğŸŒ„'
                    },
                    // æš–å¿ƒè¯
                    {
                        type: 'warm',
                        text: 'ä½ å·²ç»åšå¾—å¾ˆå¥½äº†ï¼Œæ…¢æ…¢æ¥ï¼Œä¸€åˆ‡éƒ½ä¼šå¥½èµ·æ¥çš„ã€‚',
                        illustration: 'ğŸ’–'
                    },
                    {
                        type: 'warm',
                        text: 'ä»Šå¤©çš„ä½ ä¹Ÿå¾ˆå¯çˆ±ï¼Œè®°å¾—ç»™è‡ªå·±ä¸€ä¸ªå¾®ç¬‘ã€‚',
                        illustration: 'ğŸ˜Š'
                    },
                    {
                        type: 'warm',
                        text: 'ä¸è¦å®³æ€•ï¼Œä½ æ°¸è¿œä¸æ˜¯ä¸€ä¸ªäººåœ¨æˆ˜æ–—ã€‚',
                        illustration: 'ğŸ¤'
                    },
                    {
                        type: 'warm',
                        text: 'æ¯ä¸€ä¸ªåŠªåŠ›çš„æ—¥å­ï¼Œéƒ½åœ¨ä¸ºæ›´å¥½çš„è‡ªå·±é“ºè·¯ã€‚',
                        illustration: 'ğŸŒŸ'
                    },
                    {
                        type: 'warm',
                        text: 'ç”Ÿæ´»æœ‰æ—¶å€™ä¼šæœ‰ç‚¹è‹¦ï¼Œä½†ä½ å¯ä»¥è‡ªå·±åŠ ä¸€ç‚¹ç³–ã€‚',
                        illustration: 'ğŸ¬'
                    },
                    // ASCIIè‰ºæœ¯ç”»
                    {
                        type: 'art',
                        text: 'è¿™é‡Œæœ‰ä¸€æœµå°èŠ±ï¼Œé€ç»™å¯çˆ±çš„ä½ ',
                        illustration: 'ğŸŒ¼'
                    },
                    {
                        type: 'art',
                        text: 'ç»™ä½ ä¸€ä¸ªæ¸©æš–çš„å°å¤ªé˜³',
                        illustration: 'â˜€ï¸'
                    },
                    {
                        type: 'art',
                        text: 'æ¸©æš–å°çˆ±å¿ƒ',
                        illustration: '   ğŸ’–ğŸ’–ğŸ’–ğŸ’–  \nğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–\nğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–\nğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–\n ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–\n   ğŸ’–ğŸ’–ğŸ’–ğŸ’–\n     ğŸ’–ğŸ’–'
                    },
                    {
                        type: 'art',
                        text: 'ä¸€åªå¯çˆ±çš„å°çŒ«',
                        illustration: `\nğŸ±\n\n  /\\_/\\\n ( o.o )\n  > ^ <`
                    }
                ];
                
                return warmths[Math.floor(Math.random() * warmths.length)];
            }
            
            // æ˜¾ç¤ºæ¸©æš–å†…å®¹
            function showWarmth() {
                const warmth = getRandomWarmth();
                tipText.textContent = warmth.text;
                tipIllustration.textContent = warmth.illustration;
            }
            
            // åˆå§‹åŒ–æ¸©æš–èƒ½é‡ç«™
            function initWarmthStation() {
                // åˆå§‹åŒ–æ˜¾ç¤ºç¬¬ä¸€æ¡æ¸©æš–å†…å®¹
                showWarmth();
                
                // æ·»åŠ æŒ‰é’®ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨
                if (getWarmthBtn) {
                    getWarmthBtn.addEventListener('click', showWarmth);
                }
            }
            
            // åˆå§‹åŒ–æ¸©æš–èƒ½é‡ç«™
            initWarmthStation();
            
            // æ—§çš„tipsé¢æ¿åŠŸèƒ½ï¼ˆä¿æŒå…¼å®¹æ€§ï¼‰
            const tipsToggle = document.querySelector('.tips-toggle');
            const tipsPanel = document.querySelector('.tips-panel');
            const tipsContent = document.querySelector('.tips-content');
            const oldTipText = document.querySelector('.tip-text');
            const oldTipIllustration = document.querySelector('.tip-illustration');
            
            // æ‹–åŠ¨åŠŸèƒ½å˜é‡
            let isDragging = false;
            let currentX;
            let currentY;
            let initialX;
            let initialY;
            let xOffset = 0;
            let yOffset = 0;
            let isDragged = false;
            
            // è·å–é¢æ¿å½“å‰ä½ç½®
            function getElementOffset() {
                const rect = tipsPanel.getBoundingClientRect();
                return {
                    x: rect.left,
                    y: rect.top
                };
            }
            
            // æ—§çš„tipsé¢æ¿åŠŸèƒ½ï¼ˆä¿æŒå…¼å®¹æ€§ï¼‰
            // æ˜¾ç¤ºæ¸©æš–å†…å®¹
            function showWarmth() {
                const warmth = getRandomWarmth();
                if (oldTipText) oldTipText.textContent = warmth.text;
                if (oldTipIllustration) oldTipIllustration.textContent = warmth.illustration;
            }
            
            // åˆå§‹åŒ–æƒ…ç»ªå°è´´å£«
            function initTip() {
                // åˆå§‹åŒ–æ˜¾ç¤ºç¬¬ä¸€æ¡æ¸©æš–å†…å®¹
                showWarmth();
            }
            
            // åˆ‡æ¢æƒ…ç»ªå°è´´å£«æ˜¾ç¤ºçŠ¶æ€
            function toggleTip() {
                // åªæœ‰å½“æ²¡æœ‰æ‹–åŠ¨æ—¶æ‰åˆ‡æ¢æ˜¾ç¤ºçŠ¶æ€
                if (!isDragged) {
                    tipsContent.classList.toggle('hidden');
                    tipsToggle.classList.toggle('active');
                    
                    // å¦‚æœé¢æ¿å±•å¼€ï¼Œåˆå§‹åŒ–å†…å®¹
                    if (!tipsContent.classList.contains('hidden')) {
                        initTip();
                    }
                }
                // é‡ç½®æ‹–åŠ¨çŠ¶æ€
                isDragged = false;
            }
            
            // æ‹–æ‹½åŠŸèƒ½å®ç°
            function dragStart(e) {
                const offset = getElementOffset();
                
                // åˆå§‹ä½ç½®è®¾ç½®ä¸ºå½“å‰ä½ç½®
                xOffset = offset.x;
                yOffset = offset.y;
                
                initialX = e.clientX - xOffset;
                initialY = e.clientY - yOffset;
                
                // åˆå§‹é‡ç½®æ‹–åŠ¨çŠ¶æ€
                isDragging = true;
                isDragged = false;
                
                // æ·»åŠ æ‹–åŠ¨æ—¶çš„é¼ æ ‡æ ·å¼
                document.body.style.cursor = 'grabbing';
                
                // é˜»æ­¢é»˜è®¤è¡Œä¸ºä»¥é¿å…æ–‡æœ¬é€‰æ‹©
                e.preventDefault();
            }
            
            function drag(e) {
                if (isDragging) {
                    e.preventDefault();
                    currentX = e.clientX - initialX;
                    currentY = e.clientY - initialY;
                    
                    xOffset = currentX;
                    yOffset = currentY;
                    
                    isDragged = true;
                    
                    // ç›´æ¥è®¾ç½®ä½ç½®ï¼Œä¸ä½¿ç”¨transform
                    tipsPanel.style.left = currentX + 'px';
                    tipsPanel.style.top = currentY + 'px';
                    tipsPanel.style.right = 'auto';
                    tipsPanel.style.bottom = 'auto';
                }
            }
            
            function dragEnd() {
                // æ¢å¤é¼ æ ‡æ ·å¼
                document.body.style.cursor = 'move';
                
                // åªæœ‰å½“çœŸæ­£æ‹–åŠ¨æ—¶æ‰ç¦ç”¨åˆ‡æ¢
                if (isDragged) {
                    // é˜»æ­¢toggleTipæ‰§è¡Œ
                    setTimeout(() => {
                        isDragged = false;
                    }, 100);
                }
                
                isDragging = false;
            }
            
            // ç»‘å®šäº‹ä»¶
            tipsToggle.addEventListener('click', toggleTip);
            
            // ç»‘å®šæ‹–æ‹½äº‹ä»¶
            tipsPanel.addEventListener('mousedown', dragStart);
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', dragEnd);
            
            // ç§»åŠ¨ç«¯æ”¯æŒ
            tipsPanel.addEventListener('touchstart', (e) => {
                const touch = e.touches[0];
                dragStart({ 
                    clientX: touch.clientX, 
                    clientY: touch.clientY,
                    preventDefault: () => e.preventDefault()
                });
            }, { passive: false });
            
            document.addEventListener('touchmove', (e) => {
                if (isDragging) {
                    const touch = e.touches[0];
                    drag({ 
                        clientX: touch.clientX, 
                        clientY: touch.clientY,
                        preventDefault: () => {}
                    });
                    e.preventDefault();
                }
            }, { passive: false });
            
            document.addEventListener('touchend', dragEnd);
            
            // åˆå§‹åŒ–
            initTip();
        });
    </script>


        <script>
        // å…¨å±€å˜é‡åˆå§‹åŒ–
        window.currentColor = '#E6D2AA'; // é»˜è®¤é¢œè‰²
        window.currentTool = 'brush'; // é»˜è®¤å·¥å…·
        window.doodleCanvas = null;
        window.doodleCtx = null;
        window.isDrawing = false; // ä½¿ç”¨windowå‰ç¼€ç¡®ä¿å…¨å±€ä¸€è‡´æ€§
        window.lastX = 0; // ä¸Šä¸€ä¸ªXåæ ‡
        window.lastY = 0; // ä¸Šä¸€ä¸ªYåæ ‡
        

        
        // æ›´æ–°ç”»å¸ƒå°ºå¯¸
        function updateCanvasSize() {
            try {
                if (window.doodleCanvas) {
                    // è·å–ç”»å¸ƒå®¹å™¨æˆ–ä½¿ç”¨è§†å£å°ºå¯¸
                    const container = window.doodleCanvas.parentElement || window;
                    
                    // ç›´æ¥è®¾ç½®åˆç†çš„ç”»å¸ƒå°ºå¯¸ï¼Œä¸ä¾èµ–CSSè®¡ç®—
                    const width = 800; // é»˜è®¤å®½åº¦
                    const height = 600; // é»˜è®¤é«˜åº¦
                    
                    // ç›´æ¥è®¾ç½®ç”»å¸ƒå±æ€§ï¼Œè€Œä¸åªæ˜¯CSSæ ·å¼
                    window.doodleCanvas.width = width;
                    window.doodleCanvas.height = height;
                    
                    // ç¡®ä¿CSSæ ·å¼ä¸ç”»å¸ƒå°ºå¯¸åŒ¹é…
                    window.doodleCanvas.style.width = width + 'px';
                    window.doodleCanvas.style.height = height + 'px';
                    
                    // ç§»é™¤å¯èƒ½å¹²æ‰°ç»˜å›¾çš„æ ·å¼
                    window.doodleCanvas.style.border = '1px solid #ccc';
                    window.doodleCanvas.style.background = 'transparent';
                    

                    
                    // é‡æ–°è®¾ç½®ç»˜å›¾æ ·å¼
                    if (window.doodleCtx) {
                        window.doodleCtx.strokeStyle = window.currentColor || '#E6D2AA';
                        window.doodleCtx.lineWidth = window.currentTool === 'eraser' ? 20 : 1;
                        window.doodleCtx.lineCap = 'round';
                        window.doodleCtx.lineJoin = 'round';
                        window.doodleCtx.globalCompositeOperation = window.currentTool === 'eraser' ? 'destination-out' : 'source-over';
                    }
                }
            } catch (error) {
                console.error('æ›´æ–°ç”»å¸ƒå°ºå¯¸æ—¶å‡ºé”™:', error);
            }
        }
        

        </script>
        
        <!-- å®Œæ•´çš„æ¶‚é¸¦æ¿å®ç° -->
        <script>
            // CanvasManagerç±» - å®Œæ•´çš„æ¶‚é¸¦æ¿å®ç°
            class CanvasManager {
                constructor() {
                    this.currentColor = '#000000'; // é»˜è®¤é»‘è‰²ï¼Œç¡®ä¿å¯è§
                    this.currentTool = 'brush';
                    this.lineWidth = 3; // å¢å¤§çº¿æ¡å®½åº¦
                    this.isDrawing = false;
                    this.lastX = 0;
                    this.lastY = 0;
                    this.canvas = null;
                    this.ctx = null;
                }
                
                // åˆå§‹åŒ–
                init() {

                    
                    // è·å–ç”»å¸ƒå…ƒç´ 
                    this.canvas = document.getElementById('doodle-canvas');
                    if (!this.canvas) {
                        console.error('CanvasManager: æœªæ‰¾åˆ°ç”»å¸ƒå…ƒç´ !');
                        return false;
                    }
                    
                    // å¼ºåˆ¶è®¾ç½®ç”»å¸ƒæ ·å¼
                    this.canvas.style.display = 'block';
                    this.canvas.style.pointerEvents = 'auto';
                    this.canvas.style.zIndex = '100';
                    this.canvas.style.border = '1px solid #ccc';
                    this.canvas.style.width = '100%';
                    this.canvas.style.height = '400px'; // è®¾ç½®é»˜è®¤é«˜åº¦
                    
                    // è®¾ç½®é»˜è®¤èƒŒæ™¯è‰²ä¸ºç™½è‰²
                    this.canvas.style.background = 'white';
                    
                    // æ›´æ–°ç”»å¸ƒå°ºå¯¸ï¼ˆä½¿ç”¨å®é™…åƒç´ å€¼ï¼‰
                    this.updateCanvasSize();
                    
                    // è·å–ç»˜å›¾ä¸Šä¸‹æ–‡
                    this.ctx = this.canvas.getContext('2d');
                    if (!this.ctx) {
                        console.error('CanvasManager: æ— æ³•è·å–ç”»å¸ƒä¸Šä¸‹æ–‡!');
                        return false;
                    }
                    
                    // é…ç½®ç»˜å›¾ä¸Šä¸‹æ–‡
                    this.setupContext();
                    
                    // ç»‘å®šäº‹ä»¶
                    this.bindEvents();
                    

                    return true;
                }
                
                // è®¾ç½®ä¸Šä¸‹æ–‡å±æ€§
                setupContext() {
                    if (this.ctx) {
                        // æ ¹æ®å½“å‰å·¥å…·ç±»å‹è®¾ç½®ä¸åŒçš„çº¿å®½
                        if (this.currentTool === 'eraser') {
                            // æ©¡çš®æ“¦æ¨¡å¼
                            this.ctx.lineWidth = 20; // ä½¿ç”¨æ›´å¤§çš„çº¿å®½ä½œä¸ºæ©¡çš®æ“¦
                            this.ctx.globalCompositeOperation = 'destination-out';

                        } else {
                            // ç”»ç¬”æ¨¡å¼
                            this.ctx.lineWidth = this.lineWidth;
                            this.ctx.globalCompositeOperation = 'source-over';
                            this.ctx.strokeStyle = this.currentColor;

                        }
                        
                        this.ctx.lineCap = 'round';
                        this.ctx.lineJoin = 'round';
                    }
                }
                
                // æ›´æ–°ç”»å¸ƒå°ºå¯¸
                updateCanvasSize() {
                    if (this.canvas) {
                        // ä¿æŒHTMLä¸­è®¾ç½®çš„å°ºå¯¸ï¼Œä¸è¦é‡æ–°è®¡ç®—
                        // è¿™ç¡®ä¿ç”»å¸ƒä¿æŒ800x400åƒç´ çš„åŸå§‹å°ºå¯¸

                        
                        // é‡æ–°è®¾ç½®ç»˜å›¾ä¸Šä¸‹æ–‡
                        this.setupContext();
                    }
                }
                
                // ç»‘å®šäº‹ä»¶
                bindEvents() {
                    if (!this.canvas) return;
                    
                    // é¼ æ ‡äº‹ä»¶ - ä½¿ç”¨æ­£ç¡®çš„æ–¹æ³•å
                    this.canvas.addEventListener('mousedown', (e) => this.handleStart(e));
                    this.canvas.addEventListener('mousemove', (e) => this.handleMove(e));
                    this.canvas.addEventListener('mouseup', () => this.handleEnd());
                    this.canvas.addEventListener('mouseout', () => this.handleEnd());
                    
                    // è§¦æ‘¸äº‹ä»¶
                    this.canvas.addEventListener('touchstart', (e) => this.handleTouchStart(e), { passive: false });
                    this.canvas.addEventListener('touchmove', (e) => this.handleTouchMove(e), { passive: false });
                    this.canvas.addEventListener('touchend', () => this.handleEnd());
                    
                    // çª—å£å¤§å°æ”¹å˜æ—¶æ›´æ–°ç”»å¸ƒå°ºå¯¸
                    window.addEventListener('resize', () => this.updateCanvasSize());
                }
                
                // å¤„ç†å¼€å§‹ç»˜å›¾
                handleStart(e) {

                    this.isDrawing = true;
                    
                    // ç›´æ¥ä½¿ç”¨ç”»å¸ƒåæ ‡è®¡ç®—æ–¹æ³•
                    const rect = this.canvas.getBoundingClientRect();
                    const scaleX = this.canvas.width / rect.width;
                    const scaleY = this.canvas.height / rect.height;
                    
                    // è®¡ç®—ç²¾ç¡®åæ ‡
                    this.lastX = (e.clientX - rect.left) * scaleX;
                    this.lastY = (e.clientY - rect.top) * scaleY;
                    
                    // åº”ç”¨ç»éªŒåç§»é‡ä¿®æ­£
                    const OFFSET_X = -15; // æ ¹æ®åé¦ˆè°ƒæ•´ä¸º-15px
                    const OFFSET_Y = 0;
                    
                    this.lastX += OFFSET_X;
                    this.lastY += OFFSET_Y;
                    
                    // ç¡®ä¿ä¸Šä¸‹æ–‡è®¾ç½®æ­£ç¡®
                    this.setupContext();
                    
                    // å¼€å§‹è·¯å¾„
                    this.ctx.beginPath();
                    this.ctx.moveTo(this.lastX, this.lastY);

                }
                
                // å¤„ç†ç§»åŠ¨ç»˜å›¾
                handleMove(e) {
                    if (!this.isDrawing) return;
                    
                    // ç›´æ¥ä½¿ç”¨ç”»å¸ƒåæ ‡è®¡ç®—æ–¹æ³•
                    const rect = this.canvas.getBoundingClientRect();
                    const scaleX = this.canvas.width / rect.width;
                    const scaleY = this.canvas.height / rect.height;
                    
                    // è®¡ç®—ç²¾ç¡®åæ ‡
                    const x = (e.clientX - rect.left) * scaleX;
                    const y = (e.clientY - rect.top) * scaleY;
                    
                    // åº”ç”¨ç»éªŒåç§»é‡ä¿®æ­£
                    const OFFSET_X = -15; // æ ¹æ®åé¦ˆè°ƒæ•´ä¸º-15px
                    const OFFSET_Y = 0;
                    
                    const adjustedX = x + OFFSET_X;
                    const adjustedY = y + OFFSET_Y;
                    
                    // ç¡®ä¿ä¸Šä¸‹æ–‡è®¾ç½®æ­£ç¡®
                    this.setupContext();
                    
                    // ç»˜åˆ¶çº¿æ¡
                    this.ctx.lineTo(adjustedX, adjustedY);
                    this.ctx.stroke();
                    
                    // æ›´æ–°æœ€ååæ ‡
                    this.lastX = adjustedX;
                    this.lastY = adjustedY;
                }
                
                // å¤„ç†ç»“æŸç»˜å›¾
                handleEnd() {
                    if (this.isDrawing) {
                        this.ctx.closePath();
                        this.isDrawing = false;
    
                    }
                }
                
                // å¤„ç†è§¦æ‘¸å¼€å§‹
                handleTouchStart(e) {
                    e.preventDefault(); // é˜»æ­¢é»˜è®¤è¡Œä¸º
                    const touch = e.touches[0];
                    this.handleStart(touch); // å¤ç”¨é¼ æ ‡äº‹ä»¶å¤„ç†
                }
                
                // å¤„ç†è§¦æ‘¸ç§»åŠ¨
                handleTouchMove(e) {
                    e.preventDefault(); // é˜»æ­¢é»˜è®¤è¡Œä¸º
                    const touch = e.touches[0];
                    this.handleMove(touch); // å¤ç”¨é¼ æ ‡äº‹ä»¶å¤„ç†
                }
                
                // è®¾ç½®é¢œè‰²
                setColor(color) {
                    this.currentColor = color;
                    if (this.ctx) {
                        this.ctx.strokeStyle = color;
    
                    }
                }
                
                // è®¾ç½®å·¥å…·
                setTool(tool) {
                    this.currentTool = tool;
                    if (this.ctx) {
                        if (tool === 'eraser') {
                            this.ctx.globalCompositeOperation = 'destination-out';
        
                        } else {
                            this.ctx.globalCompositeOperation = 'source-over';
        
                        }
                    }
                }
                
                // æ¸…ç©ºç”»å¸ƒ
                clearCanvas() {
                    if (this.ctx && this.canvas) {
                        this.ctx.save();
                        this.ctx.globalCompositeOperation = 'source-over';
                        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                        this.ctx.restore();
    
                    }
                }
            }
            
            // åˆ›å»ºå•ä¾‹å®ä¾‹
            const canvasManager = new CanvasManager();
            window.canvasManager = canvasManager;
            
            // å…¨å±€å‡½æ•° - ç®€åŒ–ç‰ˆæœ¬
            function initDoodleCanvas() {
    
                if (window.canvasManager) {
                    return window.canvasManager.init();
                } else {
                    console.error('canvasManageræœªå®šä¹‰');
                    return false;
                }
            }
            
            function selectColor(color, element) {
    
                if (window.canvasManager) {
                    window.canvasManager.setColor(color);
                    // å¦‚æœæä¾›äº†å…ƒç´ ï¼Œè®¾ç½®æ´»åŠ¨çŠ¶æ€
                    if (element) {
                        const siblings = Array.from(element.parentElement.children);
                        siblings.forEach(sib => sib.classList.remove('active'));
                        element.classList.add('active');
                    }
                }
            }
            
            function selectTool(tool, element) {
    
                if (window.canvasManager) {
                    window.canvasManager.setTool(tool);
                    // å¦‚æœæä¾›äº†å…ƒç´ ï¼Œè®¾ç½®æ´»åŠ¨çŠ¶æ€
                    if (element) {
                        const siblings = Array.from(element.parentElement.children);
                        siblings.forEach(sib => sib.classList.remove('active'));
                        element.classList.add('active');
                    }
                }
            }
            
            function clearCanvas() {
    
                if (window.canvasManager) {
                    window.canvasManager.clearCanvas();
                }
            }
            
            // é‡æ–°å®šä¹‰bindAllElementså‡½æ•°ï¼Œç¡®ä¿æ‰€æœ‰äº‹ä»¶æ­£ç¡®ç»‘å®š
            window.bindAllElements = function() {
    
                
                // æŸ¥æ‰¾æ‰€æœ‰å¯èƒ½çš„æ¸…ç©ºæŒ‰é’®IDå’Œç±»å
                const clearButtonIds = ['clear-btn', 'clear-button', 'clear-canvas', 'reset-canvas'];
                let clearBtn = null;
                
                // å°è¯•é€šè¿‡IDæŸ¥æ‰¾
                for (const id of clearButtonIds) {
                    clearBtn = document.getElementById(id);
                    if (clearBtn) break;
                }
                
                // å¦‚æœIDæŸ¥æ‰¾å¤±è´¥ï¼Œå°è¯•é€šè¿‡ç±»å
                if (!clearBtn) {
                    const clearBtnByClass = document.querySelector('.clear-btn, .btn-clear, .reset-btn');
                    if (clearBtnByClass) {
                        clearBtn = clearBtnByClass;
                    }
                }
                
                // ç»‘å®šæ¸…ç©ºæŒ‰é’®
                if (clearBtn) {
                    clearBtn.addEventListener('click', function() {
        
                        clearCanvas();
                    });
    
                }
                
                // ç»‘å®šé¢œè‰²é€‰æ‹©å™¨
                const colorOptions = document.querySelectorAll('.color-option, .color, .color-swatch');
                if (colorOptions.length > 0) {
                    colorOptions.forEach(option => {
                        option.addEventListener('click', function() {
                            const color = this.getAttribute('data-color') || 
                                        this.style.backgroundColor || 
                                        this.getAttribute('color');
                            if (color) {
                
                                selectColor(color, this);
                            }
                        });
                    });
    
                }
                
                // ç»‘å®šå·¥å…·æŒ‰é’®
                const toolButtons = document.querySelectorAll('.tool-btn, .tool, .drawing-tool');
                if (toolButtons.length > 0) {
                    toolButtons.forEach(button => {
                        button.addEventListener('click', function() {
                            const tool = this.getAttribute('data-tool') || 
                                       this.getAttribute('tool') || 
                                       this.dataset.tool;
                            if (tool) {
                
                                selectTool(tool, this);
                            }
                        });
                    });
    
                }
            };
            
            // å…¨å±€æš´éœ²å‡½æ•°
            window.initDoodleCanvas = initDoodleCanvas;
            window.selectColor = selectColor;
            window.selectTool = selectTool;
            window.clearCanvas = clearCanvas;
            
            // è‡ªåŠ¨åˆå§‹åŒ–
            document.addEventListener('DOMContentLoaded', function() {
    
                
                // å»¶è¿Ÿåˆå§‹åŒ–ï¼Œç¡®ä¿DOMå®Œå…¨åŠ è½½
                setTimeout(() => {
                    try {
                        // åˆå§‹åŒ–ç”»å¸ƒ
                        const initResult = initDoodleCanvas();
                        if (initResult) {
            
                            
                            // ç»‘å®šæ‰€æœ‰äº‹ä»¶
                            bindAllElements();
                            
                        } else {
                            console.error('æ¶‚é¸¦æ¿åˆå§‹åŒ–å¤±è´¥');
                        }
                    } catch (err) {
                        console.error('åˆå§‹åŒ–è¿‡ç¨‹å‡ºé”™:', err);
                    }
                }, 500);
            });
        </script>
        <!-- èƒŒæ™¯éŸ³ä¹æ§åˆ¶è„šæœ¬ -->
<script>
    // åˆ›å»ºéŸ³é¢‘å…ƒç´ 
    const audio = new Audio();
    audio.loop = true;
    audio.volume = 0.5;
    
    // è·å–DOMå…ƒç´ 
    const musicBtn = document.getElementById('music-btn');
    const musicSelect = document.getElementById('music-select');
    const musicProgress = document.getElementById('music-progress');
    
    // æ’­æ”¾/æš‚åœæ§åˆ¶
    musicBtn.addEventListener('click', function() {
        if (audio.src) {
            if (audio.paused) {
                audio.play().catch(error => {
                    console.error('éŸ³ä¹æ’­æ”¾å¤±è´¥:', error);
                });
                musicBtn.classList.add('active');
                musicBtn.innerHTML = '<span class="music-icon">â¸ï¸</span>';
            } else {
                audio.pause();
                musicBtn.classList.remove('active');
                musicBtn.innerHTML = '<span class="music-icon">ğŸµ</span>';
            }
        }
    });
    
    // éŸ³ä¹é€‰æ‹©åˆ‡æ¢
    musicSelect.addEventListener('change', function() {
        const musicSrc = this.value;
        if (musicSrc) {
            // æš‚åœå½“å‰æ’­æ”¾
            if (!audio.paused) {
                audio.pause();
                musicBtn.classList.remove('active');
                musicBtn.innerHTML = '<span class="music-icon">ğŸµ</span>';
            }
            
            // è®¾ç½®æ–°çš„éŸ³ä¹æº
            audio.src = musicSrc;
            // é‡ç½®è¿›åº¦æ¡
            musicProgress.value = 0;
            
            // å°è¯•è‡ªåŠ¨æ’­æ”¾
            audio.play().then(() => {
                musicBtn.classList.add('active');
                musicBtn.innerHTML = '<span class="music-icon">â¸ï¸</span>';
            }).catch(error => {
                console.error('éŸ³ä¹æ’­æ”¾å¤±è´¥:', error);
            });
        }
    });
    
    // æ›´æ–°è¿›åº¦æ¡ä½ç½®
    audio.addEventListener('timeupdate', function() {
        if (audio.duration > 0) {
            const progress = (audio.currentTime / audio.duration) * 100;
            musicProgress.value = progress;
        }
    });
    
    // éŸ³ä¹åŠ è½½å®Œæˆååˆå§‹åŒ–è¿›åº¦æ¡
    audio.addEventListener('loadedmetadata', function() {
        musicProgress.value = 0;
    });
    
    // æ‹–åŠ¨è¿›åº¦æ¡æ§åˆ¶éŸ³ä¹æ’­æ”¾ä½ç½®
    musicProgress.addEventListener('input', function() {
        const progress = this.value / 100;
        audio.currentTime = progress * audio.duration;
    });
    
    // ç‚¹å‡»è¿›åº¦æ¡è·³è½¬
    musicProgress.addEventListener('change', function() {
        const progress = this.value / 100;
        audio.currentTime = progress * audio.duration;
    });
    
    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
        console.log('éŸ³ä¹æ§åˆ¶åŠŸèƒ½å·²åˆå§‹åŒ–');
    });
</script>
    

</body>
</html>